# Checkpoint 6: 專案健檢 - 定期方向確認

> 🏥 **選擇性檢查點** - 長期專案建議執行
>
> 💡 **觸發時機**：每 N 次 PDCA 迭代後，或用戶要求時

## 規則

```
┌─────────────────────────────────────────────────────────────────┐
│  🏥 專案健檢（定期）                                             │
│                                                                 │
│  長期專案容易逐漸偏離方向，定期健檢防止失焦：                     │
│                                                                 │
│  觸發條件（任一）：                                              │
│  • 累計 5 次 PDCA 迭代後                                        │
│  • 距離上次健檢超過 3 天                                        │
│  • 用戶說「檢查一下方向」                                       │
│  • 感覺專案方向不明時                                           │
│                                                                 │
│  健檢內容：                                                     │
│  1. Scope 檢查 - 有沒有做「不做清單」裡的東西？                 │
│  2. 方向檢查 - 離北極星更近了嗎？                               │
│  3. 終止檢查 - 這個專案還值得繼續嗎？                           │
│                                                                 │
│  ✅ 建議：大型專案每週至少一次健檢                               │
│  ✅ 建議：感覺迷失時主動觸發健檢                                 │
└─────────────────────────────────────────────────────────────────┘
```

## 觸發條件

| 條件 | 是否觸發 |
|------|----------|
| PDCA 迭代次數 ≥ 5（自上次健檢） | ✅ 自動觸發 |
| 距離上次健檢 > 3 天 | ✅ 建議觸發 |
| 用戶要求健檢 | ✅ 立即觸發 |
| Level 0 小任務 | ❌ 不需要 |
| 新建專案（首次迭代） | ❌ 跳過（用 CP0） |

## 健檢三部曲

### 1. Scope 檢查

```
┌─────────────────────────────────────────────────────────────────┐
│  📏 Scope 檢查                                                  │
│                                                                 │
│  讀取北極星的「不做清單」，對照目前進度：                        │
│                                                                 │
│  不做清單：                                                     │
│  ❌ [排除項目 1]                                                │
│  ❌ [排除項目 2]                                                │
│                                                                 │
│  問題：我們有沒有不小心做了「不做」的東西？                      │
│                                                                 │
│  若有 Scope Creep：                                             │
│  → 警告用戶                                                     │
│  → 提供選項：                                                   │
│     A) 移除超出範圍的功能                                       │
│     B) 更新北極星，正式納入範圍                                 │
│     C) 繼續，但標記為「額外功能」                               │
└─────────────────────────────────────────────────────────────────┘
```

### 2. 方向檢查

```
┌─────────────────────────────────────────────────────────────────┐
│  🧭 方向檢查                                                    │
│                                                                 │
│  讀取北極星的「完成標準」，評估進度：                            │
│                                                                 │
│  完成標準：                                                     │
│  - [x] [標準 1] ← 已完成                                        │
│  - [ ] [標準 2] ← 未完成                                        │
│  - [ ] [標準 3] ← 未完成                                        │
│                                                                 │
│  問題：最近的工作是否讓我們更接近完成標準？                      │
│                                                                 │
│  若偏離方向：                                                   │
│  → 分析偏離原因                                                 │
│  → 提供選項：                                                   │
│     A) 調整回正軌                                               │
│     B) 更新北極星（方向本身需要調整）                           │
│     C) 暫停並重新評估                                           │
└─────────────────────────────────────────────────────────────────┘
```

### 3. 終止檢查

```
┌─────────────────────────────────────────────────────────────────┐
│  🛑 終止檢查                                                    │
│                                                                 │
│  讀取北極星的「當初為什麼開始」：                                │
│                                                                 │
│  > [當初的動機]                                                 │
│                                                                 │
│  問題：這個動機還存在嗎？專案還值得繼續嗎？                      │
│                                                                 │
│  終止信號（任一）：                                              │
│  • 原始動機已不存在                                             │
│  • 有更好的替代方案出現                                         │
│  • 成本已超過預期收益                                           │
│  • 連續 3 次健檢方向都偏離                                      │
│                                                                 │
│  若建議終止：                                                   │
│  → 提供選項：                                                   │
│     A) 繼續（用戶堅持）                                         │
│     B) 暫停（保留進度，之後再說）                               │
│     C) 放棄（標記為 abandoned）                                 │
│     D) Pivot（重新定義北極星）                                  │
└─────────────────────────────────────────────────────────────────┘
```

## 健檢報告模板

```
┌─────────────────────────────────────────────────────────────────┐
│  🏥 專案健檢報告                                                │
│                                                                 │
│  專案：[專案名稱]                                               │
│  日期：[日期]                                                   │
│  迭代次數：#N（自上次健檢：M 次）                               │
│                                                                 │
│  ═══════════════════════════════════════════════════════════   │
│                                                                 │
│  📏 Scope 檢查：[✅ 正常 | ⚠️ 有 Creep | ❌ 嚴重偏離]          │
│     [說明]                                                      │
│                                                                 │
│  🧭 方向檢查：[✅ 正軌 | ⚠️ 輕微偏離 | ❌ 嚴重偏離]            │
│     完成進度：[2/5] 項                                          │
│     [說明]                                                      │
│                                                                 │
│  🛑 終止檢查：[✅ 繼續 | ⚠️ 需討論 | ❌ 建議終止]              │
│     [說明]                                                      │
│                                                                 │
│  ═══════════════════════════════════════════════════════════   │
│                                                                 │
│  📋 建議行動：                                                  │
│     • [行動 1]                                                  │
│     • [行動 2]                                                  │
│                                                                 │
│  下次健檢：[迭代 #N+5 或 3 天後]                                │
└─────────────────────────────────────────────────────────────────┘
```

## 健檢後更新北極星

健檢完成後，更新北極星文件的健康檢查記錄：

```markdown
## 健康檢查記錄

| 日期 | 迭代 | Scope | 方向 | 結論 |
|------|------|-------|------|------|
| 2026-01-12 | #1 | ✅ | ✅ | 初始建立 |
| 2026-01-15 | #6 | ✅ | ⚠️ | 輕微偏離，已調整 |
| 2026-01-18 | #11 | ⚠️ | ✅ | 移除額外功能 |
```

## CP6 執行流程

```
┌─────────────────────────────────────────────────────────────────┐
│                     CP6 執行流程                                │
│                                                                 │
│                  觸發條件滿足                                    │
│                       ↓                                         │
│               讀取北極星文件                                     │
│                       ↓                                         │
│         ┌─────────────────────────┐                             │
│         │ 1. Scope 檢查           │                             │
│         │    對照「不做清單」     │                             │
│         └─────────────────────────┘                             │
│                       ↓                                         │
│         ┌─────────────────────────┐                             │
│         │ 2. 方向檢查             │                             │
│         │    對照「完成標準」     │                             │
│         └─────────────────────────┘                             │
│                       ↓                                         │
│         ┌─────────────────────────┐                             │
│         │ 3. 終止檢查             │                             │
│         │    對照「當初為什麼」   │                             │
│         └─────────────────────────┘                             │
│                       ↓                                         │
│               生成健檢報告                                       │
│                       ↓                                         │
│              更新北極星記錄                                      │
│                       ↓                                         │
│         ┌─────────────────────────┐                             │
│         │ 需要用戶決策？          │                             │
│         └─────────────────────────┘                             │
│              ↓ Yes          ↓ No                                │
│        AskUserQuestion    繼續執行                              │
│              ↓                                                  │
│         根據決策行動                                             │
└─────────────────────────────────────────────────────────────────┘
```

## 與其他檢查點的關係

```
CP0 (建立北極星)
     ↓
CP1 → CP1.5 → CP2 → CP3 (方向校正) → ...
                          ↑
                          │ 每 5 次迭代
                          ↓
                    CP6 (專案健檢)
                          │
                          ↓ 讀取
                    北極星文件
```

## 為什麼重要

1. **長期專案容易迷失** - 定期檢查防止漸進式偏離
2. **Scope Creep 是隱形殺手** - 小功能累積成大問題
3. **及時止損** - 發現專案不值得繼續時果斷終止
4. **保持動力** - 看到進度讓人有成就感

## Worktree 清理（v5.1 新增）

若任務使用了 Worktree，CP6 完成後需要執行 CP6.5 進行清理：

```
┌─────────────────────────────────────────────────────────────────┐
│  🏁 Worktree 清理判斷                                           │
│                                                                 │
│  使用了 Worktree?                                               │
│       ↓ Yes              ↓ No                                   │
│   進入 CP6.5          結束流程                                  │
│       │                                                         │
│       ├── 成功 → 合併 + 清理 Worktree                          │
│       ├── 失敗 → 記錄教訓 + 刪除 Worktree                       │
│       └── 暫停 → 保留 Worktree + 鎖定                          │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

詳見 [CP6.5: Worktree 完成](./cp6.5-worktree-completion.md)
