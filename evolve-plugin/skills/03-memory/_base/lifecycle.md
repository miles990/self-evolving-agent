# 記憶生命週期管理

> Memory 不是只進不出的垃圾桶，需要定期整理去蕪存菁

## 生命週期

```
新增 → 累積 → 審視 → 去蕪存菁 → 精煉知識

❌ 錯誤：一直新增，從不整理 → 垃圾堆
✅ 正確：定期整理，保留精華 → 知識庫
```

## 整理策略

| 操作 | 時機 | 做法 |
|------|------|------|
| **合併** | 同主題多筆記錄 | 整合成一筆精煉版 |
| **標註過時** | 有更好做法取代 | 加上 `[SUPERSEDED by xxx]` |
| **加上下文** | 情境限定的經驗 | 註明「適用於 v1，v2 不適用」 |
| **刪除** | 完全過時或錯誤 | 直接移除 |

## 觸發整理的時機

1. **專案 Milestone 完成後**
   - 回顧本階段新增的經驗，是否需要整合

2. **Memory 條目超過 20 筆時**
   - 太多條目會影響搜尋效率

3. **發現新舊經驗衝突時**
   - 標註舊的為 SUPERSEDED

4. **定期（建議每週或每月）**
   - 避免債務累積

## 整理 Checklist

```
┌─────────────────────────────────────────────────────────────────┐
│  Memory 整理 Checklist（每次整理時執行）                        │
│                                                                 │
│  □ 1. 有沒有重複/相似的條目？                                   │
│       → 合併成一筆                                              │
│                                                                 │
│  □ 2. 有沒有被新經驗取代的？                                    │
│       → 標註 [SUPERSEDED by xxx]                                │
│                                                                 │
│  □ 3. 有沒有超過 30 天未被引用的？                              │
│       → 評估是否仍然相關，不相關就刪除                          │
│                                                                 │
│  □ 4. 有沒有太長的條目？                                        │
│       → 精簡到只保留重點                                        │
│                                                                 │
│  □ 5. index.md 是否更新？                                       │
│       → 更新 Last curated 日期和統計數字                        │
└─────────────────────────────────────────────────────────────────┘
```

## 整理範例

**合併前：**
```
learnings/
├── 2026-01-01-react-memo.md        # React.memo 用法
├── 2026-01-03-usememo-hook.md      # useMemo 用法
└── 2026-01-05-performance-tips.md  # 效能優化技巧
```

**合併後：**
```
learnings/
└── 2026-01-05-react-performance.md  # 整合版：React 效能優化
    # 內容包含 memo, useMemo, useCallback 等完整知識
```

## index.md Metadata

```markdown
# 專案記憶索引

> Last curated: 2026-01-06
> Total entries: 15
> Next review: 2026-01-13 (7 days)

## 統計
- Learnings: 8 筆
- Failures: 4 筆
- Decisions: 2 筆
- Patterns: 1 筆
```
